
<!DOCTYPE html
  PUBLIC "" "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="description" content="The BAF stats engine calculates the focus value (FV) of the current scene. Some AF algorithms use the FV to help evaluate scene changes, trigger searches, and determine lens positions. A properly ..." /><meta name="copyright" content="(C) Copyright 2019" /><meta name="DC.rights.owner" content="(C) Copyright 2019" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Bayer AF (BAF) stats engine" /><meta name="DC.Relation" scheme="URI" content="iyg1495661028399.html" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="rda1477085277607" /><meta name="DC.Language" content="en-us" /><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Bayer AF (BAF) stats engine</title><!--  Generated with Oxygen version 17.1, build number 2016020417.  --><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/skins/skin.css"><!----></link><script type="text/javascript"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="rda1477085277607">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"></td><td><div class="navheader"></div></td></tr></tbody></table>
   <h1 class="title topictitle1" id="ariaid-title1">Bayer AF (BAF) stats engine</h1>

   <div class="body conbody">
      <p class="p">The BAF stats engine calculates the focus value (FV) of the current scene. Some AF
         algorithms use the FV to help evaluate scene changes, trigger searches, and determine lens
         positions. A properly tuned BAF stats engine is essential for projects relying on hardware
         stats. In most cases, the system-delivered defaults for BAF are sufficient and BAF tuning
         is not required. In some cases, optional tuning may be needed. For more information on BAF
         tuning, see Tune Bayer AF (BAF) stats engine.</p>

      <p class="p">The BAF stats engine consists of two parts:</p>

      <ul class="ul">
         <li class="li">Preprocessing on the image (Y-conversion and gamma correction)</li>

         <li class="li">Focus value generation </li>

      </ul>

      <p class="p">The Y-conversion provides the option to combine RGB bayer pixel quads into one signal,
         given by specified weight for each channel. The gamma LUT is used to bring up the contrast
         in darker pixels in a low light environment.</p>

      <p class="p">The following figure shows the BAF stat engine block diagram for MSM8998. There are two
         filter outputs, one each for horizontal and vertical directions. Horizontal down-scaling
         can be employed for both horizontal and vertical filter sets.</p>

      <br /><img class="image" id="rda1477085277607__image_emw_t2l_rx" src="pvv1495660862305.svg" height="NaN" width="NaN" /><br />
      <p class="p">Horizontal filter set has a 13-tap FIR filter and a fourth-order IIR filter; vertical set
         has a fourth-order IIR filter and no FIR filter. The filter block consists of a bit shifter
         between an FIR filter and an IIR filter to ensure that the input of the IIR is normalized.
         Following the IIR, the signal goes through a coring module to remove noise and then the
         accumulator adds up the FV.</p>

      <p class="p">There are four submodules in the BAF stats engine:</p>

      <ul class="ul">
         <li class="li">Y-conversion</li>

         <li class="li">Gamma LUT conversion</li>

         <li class="li">Gamma LUT</li>

         <li class="li">Scaler</li>

         <li class="li">
            <p class="p">Filter</p>

            <ul class="ul">
               <li class="li">FIR</li>

               <li class="li">Shifter</li>

               <li class="li">IIR</li>

               <li class="li">Coring</li>

            </ul>

         </li>

      </ul>

      <p class="p">The following figure shows the submodules in the filters shown in the previous block
         diagram.</p>

      <img class="image" id="rda1477085277607__image_dtz_52l_rx" src="fnv1495660889543.svg" />
   </div>

<div class="related-links">
<div class="linklist linklist relinfo"><strong>Related Information</strong><br />

<div class="related_link"><a class="navheader_parent_path" href="iyg1495661028399.html" title="Tune Bayer AF (BAF) stats engine">Tune Bayer AF (BAF) stats engine</a></div></div>
</div><div class="navfooter"><!----></div><div class="footer"><table><col width="30%" /><col width="40%" /><col width="30%" /><tr><td class="Qualcommfooter" rowspan="2" align="left">80-NK872-14</td><td class="Qualcommfooter" align="center">Confidential and Proprietary â€“ Qualcomm Technologies, Inc.</td><td></td></tr><tr><td class="Qualcommfooter" align="center"><b>MAY CONTAIN U.S. AND INTERNATIONAL EXPORT CONTROLLED INFORMATION</b></td><td align="right"></td></tr></table></div></body>
</html>