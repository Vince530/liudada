
<!DOCTYPE html
  PUBLIC "" "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="description" content="Adjust the AF spotlight threshold parameters to help prevent the FV from ending in a false peak position and recognize the spotlight scene as a flat curve. These adjustments can result in: Stricter ..." /><meta name="copyright" content="(C) Copyright 2019" /><meta name="DC.rights.owner" content="(C) Copyright 2019" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="Guidelines for spotlight parameters" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="rpu1477085286046" /><meta name="DC.Language" content="en-us" /><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Guidelines for spotlight parameters</title><!--  Generated with Oxygen version 17.1, build number 2016020417.  --><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/skins/skin.css"><!----></link><script type="text/javascript"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="rpu1477085286046">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"></td><td><div class="navheader"></div></td></tr></tbody></table>
   <h1 class="title topictitle1" id="ariaid-title1">Guidelines for spotlight parameters</h1>

   <div class="body conbody">
      <p class="p">Adjust the AF spotlight threshold parameters to help prevent the FV from ending in a false peak position and recognize the spotlight scene as a flat curve. These adjustments can result in:</p>

      <ul class="ul">
         <li class="li">Stricter peak recognition during coarse search</li>

         <li class="li">Easier recognition as a flat curve initially</li>

         <li class="li"><p class="p">Stricter peak recognition when AF search ends</p>
<img class="image" id="rpu1477085286046__image_g1q_5qq_rx" src="add1495660924940.png" /><img class="image" id="rpu1477085286046__image_ksz_wqq_rx" src="zga1495661031972.png" /></li>

      </ul>

      <p class="p">AF processing uses the flat curve ratio threshold to judge if the FV curve is a flat curve.</p>

      <ul class="ul">
         <li class="li">If FV (min)/ FV (max) &gt; Flat curve ratio threshold = flat FV curve.</li>

         <li class="li">AF final position is pushed to default position (Hyperfocus). Otherwise, it goes to its max FV (peak) position.</li>

         <li class="li">In a general scene, the flat curve ratio threshold = af_single_get_flat_ratio_threshold. For example, (0.95~0.85) FV_Min/FV_Max &gt; flat ratio, then flat scene.</li>

         <li class="li">When detecting a spotlight scene, the flat ratio changes to use a different parameter to make it easier to be recognized as an infinite scene.</li>

      </ul>

      <p class="p">For a spotlight scene, the best focusing position is usually at the infinite position or staying at the hyperfocus position.</p>

      <p class="p">With AF spotlight processing enabled, a spotlight scene is detected with a peak position larger than spotlight_far_zone_pos (50 cm). Only a sharper curve should be trusted; otherwise it is better to consider it as flat curve and let it stay in hyperfocus position (e.g., moon scene, night scene). The flat curve ratio of peak position between spotlight_far_zone_pos and spotlight_near_zone_pos is linearly interpolated.</p>

      
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="rpu1477085286046__ID-table-00000022" class="table" frame="border" border="1" rules="all"><colgroup><col style="width:1.342in" /><col style="width:1.751in" /><col style="width:0.581in" /><col style="width:0.838in" /><col style="width:1.457in" /></colgroup><thead class="thead" style="text-align:left;">
               <tr class="row">
                  <th class="entry cellrowborder" style="text-align:center;vertical-align:top;" id="d36896e76">Parameter</th>

                  <th class="entry cellrowborder" style="text-align:center;vertical-align:top;" id="d36896e79">Definition</th>

                  <th class="entry cellrowborder" style="text-align:center;vertical-align:top;" id="d36896e82">Default</th>

                  <th class="entry cellrowborder" style="text-align:center;vertical-align:top;" id="d36896e85">Range</th>

                  <th class="entry cellrowborder" style="text-align:center;vertical-align:top;" id="d36896e88">Effect</th>

               </tr>

            </thead>
<tbody class="tbody">
               <tr class="row">
                  <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d36896e76 ">enable</td>

                  <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d36896e79 ">Enable flag for spotlight AF process.</td>

                  <td class="entry cellrowborder" style="text-align:center;vertical-align:top;" headers="d36896e82 ">0</td>

                  <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d36896e85 ">0,1</td>

                  <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d36896e88 "> </td>

               </tr>

               <tr class="row">
                  <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d36896e76 "><p class="p">far_flat_th</p>
<p class="p">(AF Cont Spotlight Far Flat Thresh)</p>
</td>

                  <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d36896e79 ">Flat threshold for far scene when detecting a spotlight condition.</td>

                  <td class="entry cellrowborder" style="text-align:center;vertical-align:top;" headers="d36896e82 ">0.55</td>

                  <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d36896e85 ">0-1</td>

                  <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d36896e88 ">The lower the easier to be recognized as flat scene</td>

               </tr>

               <tr class="row">
                  <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d36896e76 "><p class="p">macro_flat_th</p>
<p class="p">(AF Cont Spotlight Macro Flat Thresh)</p>
</td>

                  <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d36896e79 ">flat_threshold for macro scene when detecting spotlight condition</td>

                  <td class="entry cellrowborder" style="text-align:center;vertical-align:top;" headers="d36896e82 ">0.85</td>

                  <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d36896e85 ">0-1</td>

                  <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d36896e88 ">The lower the easier to be recognized as flat scene</td>

               </tr>

               <tr class="row">
                  <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d36896e76 "><p class="p">inc_flat_th</p>
<p class="p">(AF Cont Spotlight Inc Flat Thresh)</p>
</td>

                  <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d36896e79 "><p class="p">Threshold to judge if current AF position is in increase or flat condition.</p>
<p class="p">General Scene = 1.005</p>
<p class="p">Spotlight Scene = 1.035</p>
</td>

                  <td class="entry cellrowborder" style="text-align:center;vertical-align:top;" headers="d36896e82 ">1.035</td>

                  <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d36896e85 ">1-3</td>

                  <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d36896e88 "><p class="p">The larger the value, the harder to be recognized as FV increment.</p>
<p class="p">Increasing inc_flat_th and decreasing dec_flat_th helps to prevent ending in a false peak position and to recognize it as a flat curve.</p>
</td>

               </tr>

               <tr class="row">
                  <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d36896e76 "><p class="p">dec_flat_th</p>
<p class="p">(AF Cont Spotlight Decr Flat Thresh)</p>
</td>

                  <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d36896e79 "><p class="p">Threshold to judge if current AF position is in decrease or flat condition.</p>
<p class="p">General Scene = 0.995</p>
<p class="p">Spotlight Scene = 0.978</p>
</td>

                  <td class="entry cellrowborder" style="text-align:center;vertical-align:top;" headers="d36896e82 ">0.978</td>

                  <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d36896e85 "><p class="p">0-1</p>
<p class="p">.</p>
</td>

                  <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d36896e88 "><p class="p">The lower the value the harder to be recognized as FV decrement.</p>
<p class="p">Increasing inc_flat_th and decreasing dec_flat_th helps to prevent ending in a false peak position and to recognize it as a flat curve.</p>
</td>

               </tr>

            </tbody>
</table>
</div>

   </div>

<div class="navfooter"><!----></div><div class="footer"><table><col width="30%" /><col width="40%" /><col width="30%" /><tr><td class="Qualcommfooter" rowspan="2" align="left">80-NK872-14</td><td class="Qualcommfooter" align="center">Confidential and Proprietary – Qualcomm Technologies, Inc.</td><td></td></tr><tr><td class="Qualcommfooter" align="center"><b>MAY CONTAIN U.S. AND INTERNATIONAL EXPORT CONTROLLED INFORMATION</b></td><td align="right"></td></tr></table></div></body>
</html>