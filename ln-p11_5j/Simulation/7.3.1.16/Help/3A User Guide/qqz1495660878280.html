
<!DOCTYPE html
  PUBLIC "" "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="description" content="In PDAF, the course search controls the lens movement to the focus position. It is an iterative process based on steps associated with the phase difference estimation. A higher phase difference means ..." /><meta name="copyright" content="(C) Copyright 2019" /><meta name="DC.rights.owner" content="(C) Copyright 2019" /><meta name="DC.Type" content="concept" /><meta name="DC.Title" content="PDAF coarse search (focus converge)" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="dbh1477085276608" /><meta name="DC.Language" content="en-us" /><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>PDAF coarse search (focus converge)</title><!--  Generated with Oxygen version 17.1, build number 2016020417.  --><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="oxygen-webhelp/resources/skins/skin.css"><!----></link><script type="text/javascript"><!--
          
          var prefix = "index.html";
          
          --></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" class="frmBody" id="dbh1477085276608">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"></td><td><div class="navheader"></div></td></tr></tbody></table>
   <h1 class="title topictitle1" id="ariaid-title1">PDAF coarse search (focus converge)</h1>

   <div class="body conbody">
      <img class="image" id="dbh1477085276608__image_ryb_ccl_rx" src="qpc1495660985889.svg" />
      <p class="p">In PDAF, the course search controls the lens movement to the focus position.
         It is an iterative process based on steps associated with the phase difference estimation.
         A higher phase difference means higher disparity and therefore a greater defocus value.
         However, as illustrated in the following figure, when the phase difference is large, then
         there is a correspondingly high noise level. When the phase difference is small, then the
         noise level is also small. As the lens moves closer to the optimal focus, there is less
         noise.</p>

      <img class="image" id="dbh1477085276608__image_opg_dcl_rx" src="krg1495660882117.svg" />
      <p class="p">Because of this, it is necessary to perform autofocus as an iterative
         process where the lens is moved gradually to achieve optimal focus. The iterative process
         results in a smooth autofocus converge and prevents overshoot behavior.</p>

      <p class="p">To make AF smooth, PDAF uses iterative movements to provide a good AF
         converge user experience and to prevent overshoot behavior. The PDAF Focus Table contains
         entries that specify the percentage of lens movement required based on the phase difference
         estimation. The Move Percent  tuning parameter breaks down one large lens movement into
         small lens movements based on the original defocus distance.</p>

      <img class="image" id="dbh1477085276608__image_i5b_fcl_rx" src="gfg1495660999836.svg" />
      <p class="p">Assume that phase difference estimation in the preceding graph is
         100 µm.</p>

      <ol class="ol">
         <li class="li">Using the Move Percent from the appropriate entry in the Focus Table,
            the algorithm triggers the lens to move 75% of the distance required to achieve optimal
            focus. The algorithm then waits for another depth estimation.</li>

         <li class="li">Based on new depth estimation, the algorithm triggers the next lens
            move by linearly interpolating the appropriate move percentage. The algorithm then waits
            for another depth estimation.</li>

         <li class="li">The process continues until the optimal lens position is reached.</li>

      </ol>

      <p class="p">A smaller percentage for a higher reported defocus value can prevent
         inaccurate AF jumping and create a smoother user experience because of the smooth focus
         tracking. A higher percentage means less iterative lens movement, faster AF speed, and
         aggressive focus tracking. However, this can result in overshooting the target. The lens
         movements necessary to correct the overshoot produce an unsmooth AF converge and a poor
         user experience.</p>

      <div class="note note" id="dbh1477085276608__note_N10057_N1000E_N10001"><span class="notetitle">Note:</span> For 2PD, the Move Percent can
         be higher than for sparse PDAF.</div>

      <br /><img class="image" id="dbh1477085276608__image_tbv_hcl_rx" src="wtg1495660824319.svg" height="NaN" width="NaN" /><br />
      <br /><img class="image" id="dbh1477085276608__image_slv_3cl_rx" src="hzu1495660822931.svg" /><br />
   </div>

<div class="navfooter"><!----></div><div class="footer"><table><col width="30%" /><col width="40%" /><col width="30%" /><tr><td class="Qualcommfooter" rowspan="2" align="left">80-NK872-14</td><td class="Qualcommfooter" align="center">Confidential and Proprietary – Qualcomm Technologies, Inc.</td><td></td></tr><tr><td class="Qualcommfooter" align="center"><b>MAY CONTAIN U.S. AND INTERNATIONAL EXPORT CONTROLLED INFORMATION</b></td><td align="right"></td></tr></table></div></body>
</html>