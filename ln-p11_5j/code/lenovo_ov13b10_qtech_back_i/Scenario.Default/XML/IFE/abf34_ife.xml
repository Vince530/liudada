<?xml version="1.0" encoding="UTF-8" ?>
<!--
========================================================================
   Copyright (c) 2017-2021 Qualcomm Technologies, Inc.
   All Rights Reserved.
   Confidential and Proprietary - Qualcomm Technologies, Inc.
========================================================================
-->
<abf34_ife
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:noNamespaceSchemaLocation="..\..\..\XSD\isp\abf_3_4_0.xsd">
  <enable_section>
    <abf_enable>1</abf_enable>
    <sbpc_enable>0</sbpc_enable>
  </enable_section>
  <module_version major_revision="3" minor_revision="4" incr_revision="0"/>
  <parameter_version>
    <revision>0</revision>
  </parameter_version>
  <control_variables>
    <control_var_type>control_drc_gain</control_var_type>
    <control_var_type>control_aec_exp_sensitivity_ratio</control_var_type>
    <control_var_type>control_gain</control_var_type>
  </control_variables>
  <control_method>
    <aec_exp_control>control_gain</aec_exp_control>
    <aec_hdr_control>control_aec_exp_sensitivity_ratio</aec_hdr_control>
  </control_method>
  <dynamic_enable_triggers>
    <abf_enable>
      <enable>0</enable>
      <hyst_control_var>control_gain</hyst_control_var>
      <hyst_mode>UPWARD</hyst_mode>
      <hyst_trigger>
        <start1>0.9</start1>
        <end1>0.91</end1>
        <start2>0.9</start2>
        <end2>0.91</end2>
      </hyst_trigger>
    </abf_enable>
  </dynamic_enable_triggers>
  <chromatix_abf34_reserve>
    <cross_plane_en>1</cross_plane_en>
    <radial_anchor_tab>
      <radial_anchor>0 0.4 0.6 0.8 1</radial_anchor>
    </radial_anchor_tab>
  </chromatix_abf34_reserve>
  <chromatix_abf34_core>
    <mod_abf34_drc_gain_data>
      <drc_gain_trigger>
        <start>1</start>
        <end>100</end>
      </drc_gain_trigger>
      <drc_gain_data>
        <mod_abf34_hdr_aec_data>
          <hdr_aec_trigger>
            <exp_time_start>1</exp_time_start>
            <exp_time_end>16</exp_time_end>
            <aec_sensitivity_start>1</aec_sensitivity_start>
            <aec_sensitivity_end>16</aec_sensitivity_end>
            <exp_gain_start>1</exp_gain_start>
            <exp_gain_end>16</exp_gain_end>
          </hdr_aec_trigger>
          <hdr_aec_data>
            <mod_abf34_aec_data>
              <aec_trigger>
                <lux_idx_start>1</lux_idx_start>
                <lux_idx_end>900</lux_idx_end>
                <gain_start>1</gain_start>
                <gain_end>1.2</gain_end>
              </aec_trigger>
              <abf34_rgn_data>
                <bpc_fmax>16</bpc_fmax>
                <bpc_fmin>16</bpc_fmin>
                <bpc_maxshft>3</bpc_maxshft>
                <bpc_minshft>3</bpc_minshft>
                <bpc_offset>64</bpc_offset>
                <blk_pix_matching_rb>0</blk_pix_matching_rb>
                <blk_pix_matching_g>0</blk_pix_matching_g>
                <noise_stdlut_level_tab>
                  <noise_stdlut_level>0 5.91608 8.426149 10.29563 11.87434 13.2665 14.56022 15.71623 16.79286 17.80449 18.78829 19.69772 20.56696 21.40093 22.22611 23 23.74868 24.47448 25.19921 25.88436 26.55184 27.20294 27.85678 28.47806 29.08608 29.68164 30.28201 30.8545 31.41656 31.96873 32.52691 33.06055 33.58571 34.11744 34.62658 35.12834 35.62303 36.12478 36.60601 37.08099 37.54996 38.02631 38.48376 38.93584 39.38274 39.83717 40.27406 40.70626 41.13393 41.13393 41.13393 41.13393 41.13393 41.13393 41.13393 41.13393 41.13393 41.13393 41.13393 41.13393 41.13393 41.13393 41.13393 41.13393 41.13393</noise_stdlut_level>
                </noise_stdlut_level_tab>
                <distance_ker_tab>
                  <distance_ker>3 2 1 3 2 1</distance_ker>
                </distance_ker_tab>
                <curve_offset_tab>
                  <curve_offset>0 0 0 0</curve_offset>
                </curve_offset_tab>
                <noise_prsv_anchor_lo>160</noise_prsv_anchor_lo>
                <noise_prsv_anchor_hi>224</noise_prsv_anchor_hi>
                <noise_prsv_lo_tab>
                  <noise_prsv_lo>0.6 0.6</noise_prsv_lo>
                </noise_prsv_lo_tab>
                <noise_prsv_hi_tab>
                  <noise_prsv_hi>0.6 0.6</noise_prsv_hi>
                </noise_prsv_hi_tab>
                <radial_gain_tab>
                  <radial_gain>1 1 1 1 1 1 1 1 1 1</radial_gain>
                </radial_gain_tab>
                <edge_softness>3</edge_softness>
              </abf34_rgn_data>
            </mod_abf34_aec_data>
            <mod_abf34_aec_data>
              <aec_trigger>
                <lux_idx_start>1</lux_idx_start>
                <lux_idx_end>900</lux_idx_end>
                <gain_start>1.3</gain_start>
                <gain_end>2</gain_end>
              </aec_trigger>
              <abf34_rgn_data>
                <bpc_fmax>16</bpc_fmax>
                <bpc_fmin>16</bpc_fmin>
                <bpc_maxshft>3</bpc_maxshft>
                <bpc_minshft>3</bpc_minshft>
                <bpc_offset>64</bpc_offset>
                <blk_pix_matching_rb>0</blk_pix_matching_rb>
                <blk_pix_matching_g>0</blk_pix_matching_g>
                <noise_stdlut_level_tab>
                  <noise_stdlut_level>0 7.483315 10.583 12.92285 14.93318 16.70329 18.30301 19.77372 21.11871 22.40536 23.62202 24.77902 25.88436 26.92582 27.94638 28.93095 29.88311 30.80584 31.68596 32.55764 33.40659 34.23449 35.04283 35.81899 36.59235 37.3497 38.092 38.8201 39.52214 40.22437 40.91455 41.59327 42.26109 42.90688 43.55456 44.19276 44.82187 45.44227 46.05432 46.64761 47.24405 47.83304 48.41488 48.9898 49.54796 50.10988 50.66557 51.21523 51.75906 51.75906 51.75906 51.75906 51.75906 51.75906 51.75906 51.75906 51.75906 51.75906 51.75906 51.75906 51.75906 51.75906 51.75906 51.75906 51.75906</noise_stdlut_level>
                </noise_stdlut_level_tab>
                <distance_ker_tab>
                  <distance_ker>3 2 1 3 2 1</distance_ker>
                </distance_ker_tab>
                <curve_offset_tab>
                  <curve_offset>0 0 0 0</curve_offset>
                </curve_offset_tab>
                <noise_prsv_anchor_lo>160</noise_prsv_anchor_lo>
                <noise_prsv_anchor_hi>224</noise_prsv_anchor_hi>
                <noise_prsv_lo_tab>
                  <noise_prsv_lo>0.6 0.6</noise_prsv_lo>
                </noise_prsv_lo_tab>
                <noise_prsv_hi_tab>
                  <noise_prsv_hi>0.6 0.6</noise_prsv_hi>
                </noise_prsv_hi_tab>
                <radial_gain_tab>
                  <radial_gain>1 1 1 1 1 1 1 1 1 1</radial_gain>
                </radial_gain_tab>
                <edge_softness>3</edge_softness>
              </abf34_rgn_data>
            </mod_abf34_aec_data>
            <mod_abf34_aec_data>
              <aec_trigger>
                <lux_idx_start>1</lux_idx_start>
                <lux_idx_end>900</lux_idx_end>
                <gain_start>2.1</gain_start>
                <gain_end>4</gain_end>
              </aec_trigger>
              <abf34_rgn_data>
                <bpc_fmax>16</bpc_fmax>
                <bpc_fmin>16</bpc_fmin>
                <bpc_maxshft>3</bpc_maxshft>
                <bpc_minshft>3</bpc_minshft>
                <bpc_offset>64</bpc_offset>
                <blk_pix_matching_rb>0</blk_pix_matching_rb>
                <blk_pix_matching_g>0</blk_pix_matching_g>
                <noise_stdlut_level_tab>
                  <noise_stdlut_level>0 9.219544 13.0384 15.96872 18.43909 20.61553 22.58318 24.39262 26.07681 27.6767 29.1719 30.59412 31.95309 33.25658 34.51087 35.72114 36.89174 38.02631 39.12799 40.1995 41.24318 42.26109 43.25506 44.22669 45.17743 46.10857 47.02127 47.92703 48.80574 49.6689 50.51732 51.35173 52.17279 52.98113 53.77732 54.56189 55.33534 56.09813 56.85068 57.5934 58.32667 59.05083 59.76621 60.47313 61.17189 61.87083 62.55398 63.22974 63.89836 63.89836 63.89836 63.89836 63.89836 63.89836 63.89836 63.89836 63.89836 63.89836 63.89836 63.89836 63.89836 63.89836 63.89836 63.89836 63.89836</noise_stdlut_level>
                </noise_stdlut_level_tab>
                <distance_ker_tab>
                  <distance_ker>3 2 1 3 2 1</distance_ker>
                </distance_ker_tab>
                <curve_offset_tab>
                  <curve_offset>0 0 0 0</curve_offset>
                </curve_offset_tab>
                <noise_prsv_anchor_lo>160</noise_prsv_anchor_lo>
                <noise_prsv_anchor_hi>224</noise_prsv_anchor_hi>
                <noise_prsv_lo_tab>
                  <noise_prsv_lo>0.6 0.6</noise_prsv_lo>
                </noise_prsv_lo_tab>
                <noise_prsv_hi_tab>
                  <noise_prsv_hi>0.6 0.6</noise_prsv_hi>
                </noise_prsv_hi_tab>
                <radial_gain_tab>
                  <radial_gain>1 1 1 1 1 1 1 1 1 1</radial_gain>
                </radial_gain_tab>
                <edge_softness>3</edge_softness>
              </abf34_rgn_data>
            </mod_abf34_aec_data>
            <mod_abf34_aec_data>
              <aec_trigger>
                <lux_idx_start>1</lux_idx_start>
                <lux_idx_end>900</lux_idx_end>
                <gain_start>4.2</gain_start>
                <gain_end>8</gain_end>
              </aec_trigger>
              <abf34_rgn_data>
                <bpc_fmax>16</bpc_fmax>
                <bpc_fmin>16</bpc_fmin>
                <bpc_maxshft>3</bpc_maxshft>
                <bpc_minshft>3</bpc_minshft>
                <bpc_offset>64</bpc_offset>
                <blk_pix_matching_rb>0</blk_pix_matching_rb>
                <blk_pix_matching_g>0</blk_pix_matching_g>
                <noise_stdlut_level_tab>
                  <noise_stdlut_level>0 11 15.52417 19.0263 21.9545 24.55606 26.90725 29.05168 31.06445 32.93934 34.72751 36.41428 38.03945 39.59798 41.08528 42.53234 43.92038 45.27692 46.59399 47.86439 49.11212 50.31898 51.50728 52.66878 53.79591 54.90902 55.99107 57.06137 58.11196 59.13544 60.14981 61.13919 62.12085 63.07932 64.03124 64.96922 65.88627 66.7982 67.69048 68.57842 69.45502 70.31358 71.16882 72.00694 72.84229 73.66817 74.47819 75.28612 76.0789 76.0789 76.0789 76.0789 76.0789 76.0789 76.0789 76.0789 76.0789 76.0789 76.0789 76.0789 76.0789 76.0789 76.0789 76.0789 76.0789</noise_stdlut_level>
                </noise_stdlut_level_tab>
                <distance_ker_tab>
                  <distance_ker>3 2 1 3 2 1</distance_ker>
                </distance_ker_tab>
                <curve_offset_tab>
                  <curve_offset>0 0 0 0</curve_offset>
                </curve_offset_tab>
                <noise_prsv_anchor_lo>160</noise_prsv_anchor_lo>
                <noise_prsv_anchor_hi>224</noise_prsv_anchor_hi>
                <noise_prsv_lo_tab>
                  <noise_prsv_lo>0.6 0.6</noise_prsv_lo>
                </noise_prsv_lo_tab>
                <noise_prsv_hi_tab>
                  <noise_prsv_hi>0.6 0.6</noise_prsv_hi>
                </noise_prsv_hi_tab>
                <radial_gain_tab>
                  <radial_gain>1 1 1 1 1 1 1 1 1 1</radial_gain>
                </radial_gain_tab>
                <edge_softness>3</edge_softness>
              </abf34_rgn_data>
            </mod_abf34_aec_data>
            <mod_abf34_aec_data>
              <aec_trigger>
                <lux_idx_start>1</lux_idx_start>
                <lux_idx_end>900</lux_idx_end>
                <gain_start>8.2</gain_start>
                <gain_end>15</gain_end>
              </aec_trigger>
              <abf34_rgn_data>
                <bpc_fmax>16</bpc_fmax>
                <bpc_fmin>16</bpc_fmin>
                <bpc_maxshft>3</bpc_maxshft>
                <bpc_minshft>3</bpc_minshft>
                <bpc_offset>64</bpc_offset>
                <blk_pix_matching_rb>0</blk_pix_matching_rb>
                <blk_pix_matching_g>0</blk_pix_matching_g>
                <noise_stdlut_level_tab>
                  <noise_stdlut_level>0 14.52584 20.54264 25.13961 29.03446 32.46537 35.56684 38.40573 41.06093 43.55456 45.91296 48.156 50.28917 52.34501 54.32311 56.23166 58.06892 59.85817 61.59546 63.28507 64.93073 66.52819 68.09552 69.62758 71.12665 72.58788 74.02702 75.43871 76.82448 78.18568 79.5173 80.83316 82.12795 83.40264 84.65223 85.88947 87.10912 88.31195 89.4986 90.66422 91.82048 92.96236 94.09039 95.19979 96.30161 97.39097 98.46827 99.53391 100.5833 100.5833 100.5833 100.5833 100.5833 100.5833 100.5833 100.5833 100.5833 100.5833 100.5833 100.5833 100.5833 100.5833 100.5833 100.5833 100.5833</noise_stdlut_level>
                </noise_stdlut_level_tab>
                <distance_ker_tab>
                  <distance_ker>3 2 1 3 2 1</distance_ker>
                </distance_ker_tab>
                <curve_offset_tab>
                  <curve_offset>0 0 0 0</curve_offset>
                </curve_offset_tab>
                <noise_prsv_anchor_lo>160</noise_prsv_anchor_lo>
                <noise_prsv_anchor_hi>224</noise_prsv_anchor_hi>
                <noise_prsv_lo_tab>
                  <noise_prsv_lo>0.6 0.6</noise_prsv_lo>
                </noise_prsv_lo_tab>
                <noise_prsv_hi_tab>
                  <noise_prsv_hi>0.6 0.6</noise_prsv_hi>
                </noise_prsv_hi_tab>
                <radial_gain_tab>
                  <radial_gain>1 1 1 1 1 1 1 1 1 1</radial_gain>
                </radial_gain_tab>
                <edge_softness>3</edge_softness>
              </abf34_rgn_data>
            </mod_abf34_aec_data>
            <mod_abf34_aec_data>
              <aec_trigger>
                <lux_idx_start>1</lux_idx_start>
                <lux_idx_end>900</lux_idx_end>
                <gain_start>15.2</gain_start>
                <gain_end>28.2</gain_end>
              </aec_trigger>
              <abf34_rgn_data>
                <bpc_fmax>16</bpc_fmax>
                <bpc_fmin>16</bpc_fmin>
                <bpc_maxshft>3</bpc_maxshft>
                <bpc_minshft>3</bpc_minshft>
                <bpc_offset>64</bpc_offset>
                <blk_pix_matching_rb>0</blk_pix_matching_rb>
                <blk_pix_matching_g>0</blk_pix_matching_g>
                <noise_stdlut_level_tab>
                  <noise_stdlut_level>0 16.52271 23.34524 28.6007 33.03029 36.91883 40.4475 43.6921 46.70118 49.53786 52.22068 54.76313 57.2014 59.5399 61.78188 63.95311 66.05301 68.08083 70.05712 71.97221 73.84443 75.67033 77.44675 79.18964 80.895 82.55907 84.1962 85.8021 87.37276 88.92131 90.44335 91.93476 93.40771 94.85779 96.28084 97.68828 99.07573 100.439 101.789 103.1213 104.4318 105.7308 107.014 108.2774 109.5308 110.77 111.9911 113.2034 114.4028 114.4028 114.4028 114.4028 114.4028 114.4028 114.4028 114.4028 114.4028 114.4028 114.4028 114.4028 114.4028 114.4028 114.4028 114.4028 114.4028</noise_stdlut_level>
                </noise_stdlut_level_tab>
                <distance_ker_tab>
                  <distance_ker>3 2 1 3 2 1</distance_ker>
                </distance_ker_tab>
                <curve_offset_tab>
                  <curve_offset>0 0 0 0</curve_offset>
                </curve_offset_tab>
                <noise_prsv_anchor_lo>160</noise_prsv_anchor_lo>
                <noise_prsv_anchor_hi>224</noise_prsv_anchor_hi>
                <noise_prsv_lo_tab>
                  <noise_prsv_lo>0.6 0.6</noise_prsv_lo>
                </noise_prsv_lo_tab>
                <noise_prsv_hi_tab>
                  <noise_prsv_hi>0.6 0.6</noise_prsv_hi>
                </noise_prsv_hi_tab>
                <radial_gain_tab>
                  <radial_gain>1 1 1 1 1 1 1 1 1 1</radial_gain>
                </radial_gain_tab>
                <edge_softness>3</edge_softness>
              </abf34_rgn_data>
            </mod_abf34_aec_data>
            <mod_abf34_aec_data>
              <aec_trigger>
                <lux_idx_start>1</lux_idx_start>
                <lux_idx_end>900</lux_idx_end>
                <gain_start>28.8</gain_start>
                <gain_end>64</gain_end>
              </aec_trigger>
              <abf34_rgn_data>
                <bpc_fmax>16</bpc_fmax>
                <bpc_fmin>16</bpc_fmin>
                <bpc_maxshft>3</bpc_maxshft>
                <bpc_minshft>3</bpc_minshft>
                <bpc_offset>64</bpc_offset>
                <blk_pix_matching_rb>0</blk_pix_matching_rb>
                <blk_pix_matching_g>0</blk_pix_matching_g>
                <noise_stdlut_level_tab>
                  <noise_stdlut_level>0 17.60682 24.8998 30.4959 35.21363 39.37004 43.12772 46.58326 49.7996 52.82045 55.67764 58.39521 60.9918 63.48228 65.87868 68.18358 70.42017 72.58788 74.6927 76.73982 78.73373 80.67838 82.57724 84.4334 86.24964 88.0284 89.77193 91.48224 93.16115 94.81033 96.43132 98.02551 99.59418 101.1385 102.6596 104.1585 105.6362 107.0934 108.5311 109.95 111.3508 112.7342 114.1008 115.4513 116.7861 118.1017 119.4069 120.698 121.9754 121.9754 121.9754 121.9754 121.9754 121.9754 121.9754 121.9754 121.9754 121.9754 121.9754 121.9754 121.9754 121.9754 121.9754 121.9754 121.9754</noise_stdlut_level>
                </noise_stdlut_level_tab>
                <distance_ker_tab>
                  <distance_ker>3 2 1 3 2 1</distance_ker>
                </distance_ker_tab>
                <curve_offset_tab>
                  <curve_offset>0 0 0 0</curve_offset>
                </curve_offset_tab>
                <noise_prsv_anchor_lo>160</noise_prsv_anchor_lo>
                <noise_prsv_anchor_hi>224</noise_prsv_anchor_hi>
                <noise_prsv_lo_tab>
                  <noise_prsv_lo>0.6 0.6</noise_prsv_lo>
                </noise_prsv_lo_tab>
                <noise_prsv_hi_tab>
                  <noise_prsv_hi>0.6 0.6</noise_prsv_hi>
                </noise_prsv_hi_tab>
                <radial_gain_tab>
                  <radial_gain>1 1 1 1 1 1 1 1 1 1</radial_gain>
                </radial_gain_tab>
                <edge_softness>3</edge_softness>
              </abf34_rgn_data>
            </mod_abf34_aec_data>
            <mod_abf34_aec_data>
              <aec_trigger>
                <lux_idx_start>1</lux_idx_start>
                <lux_idx_end>900</lux_idx_end>
                <gain_start>64.2</gain_start>
                <gain_end>96</gain_end>
              </aec_trigger>
              <abf34_rgn_data>
                <bpc_fmax>16</bpc_fmax>
                <bpc_fmin>16</bpc_fmin>
                <bpc_maxshft>3</bpc_maxshft>
                <bpc_minshft>3</bpc_minshft>
                <bpc_offset>64</bpc_offset>
                <blk_pix_matching_rb>0</blk_pix_matching_rb>
                <blk_pix_matching_g>0</blk_pix_matching_g>
                <noise_stdlut_level_tab>
                  <noise_stdlut_level>0 18 25.4362 31.16087 35.97221 40.22437 44.05678 47.59201 50.87239 53.96295 56.87706 59.65736 62.3057 64.85368 67.29784 69.66348 71.94442 74.16199 76.30859 78.40281 80.43631 82.42573 84.36824 86.26123 88.11924 89.93331 91.71696 93.46122 95.17878 96.86073 98.51904 100.1449 101.7497 103.3247 104.8809 106.4096 107.9213 109.4075 110.8783 112.3254 113.7585 115.1694 116.5676 117.9491 119.3105 120.6607 121.9918 123.3126 124.6154 124.6154 124.6154 124.6154 124.6154 124.6154 124.6154 124.6154 124.6154 124.6154 124.6154 124.6154 124.6154 124.6154 124.6154 124.6154 124.6154</noise_stdlut_level>
                </noise_stdlut_level_tab>
                <distance_ker_tab>
                  <distance_ker>3 2 1 3 2 1</distance_ker>
                </distance_ker_tab>
                <curve_offset_tab>
                  <curve_offset>0 0 0 0</curve_offset>
                </curve_offset_tab>
                <noise_prsv_anchor_lo>160</noise_prsv_anchor_lo>
                <noise_prsv_anchor_hi>224</noise_prsv_anchor_hi>
                <noise_prsv_lo_tab>
                  <noise_prsv_lo>0.6 0.6</noise_prsv_lo>
                </noise_prsv_lo_tab>
                <noise_prsv_hi_tab>
                  <noise_prsv_hi>0.6 0.6</noise_prsv_hi>
                </noise_prsv_hi_tab>
                <radial_gain_tab>
                  <radial_gain>1 1 1 1 1 1 1 1 1 1</radial_gain>
                </radial_gain_tab>
                <edge_softness>3</edge_softness>
              </abf34_rgn_data>
            </mod_abf34_aec_data>
          </hdr_aec_data>
        </mod_abf34_hdr_aec_data>
      </drc_gain_data>
    </mod_abf34_drc_gain_data>
  </chromatix_abf34_core>
</abf34_ife>
